GVR.JSON.area_json={db:["东北","黑龙江","吉林","辽宁"],hb:["华北","北京","河北","内蒙古","天津"],hd:["华东","安徽","江苏","山东","上海","浙江"],hn:["华南","广东","广西","海南"],hz:["华中","福建","湖北","湖南","江西"],xb:["西北","甘肃","河南","宁夏","青海","山西","陕西","新疆"],xn:["西南","贵州","四川","西藏","云南","重庆"]},GVR.JSON.provinceArray=["黑龙江","吉林","辽宁","北京","河北","内蒙古","天津","安徽","江苏","山东","上海","浙江","广东","广西","海南","福建","湖北","湖南","江西","甘肃","河南","宁夏","青海","山西","陕西","新疆","贵州","四川","西藏","云南","重庆","台湾","香港","澳门"],GVR.JSON.provinceJson=["heilongjiang","jilin","liaoning","beijing","hebei","neimenggu","tianjin","anhui","jiangsu","shandong","shanghai","zhejiang","guangdong","guangxi","hainan","fujian","hubei","hunan","jiangxi","gansu","henan","ningxia","qinghai","shanxi","shanxi1","xinjiang","guizhou","sichuan","xizang","yunnan","chongqing","tw","xianggang","aomen"];var COMMON_FUNC={single_num_tpl:_.template($("#single_num_tpl").html()),ready_init:function(){var e=this;e.get_time()},get_time:function(){function e(){var n,a=new Date,i=a.getHours(),t=a.getMinutes(),o=a.getFullYear(),s=a.getMonth()+1,r=a.getDate();i=i<10?"0"+i:i,t=t<10?"0"+t:t,s=s<10?"0"+s:s,r=r<10?"0"+r:r,n=o+"年"+s+"月"+r+"日",$("#js-hour-text").text(i),$("#js-min-text").text(t),$("#js-year-text").text(n),setTimeout(e,1e3)}e()},num_init:function(e){var n=this,a=$("<div></div>");return e=e.toString(),e.length>=3&&(e=e.replace(/(\d)(?=(\d{3})+$)/g,"$1,")),_.each(e,function(e,i){","===e&&(e="split");var t=n.single_num_tpl({index:e});a.append(t)}),a},animate_num:function(e,n,a){var t=this,o=10;if(n>a)return console.info("数据顺序不对"),!1;var s,r=(a-n).toString().length-2,l=0;if(r>0)for(i=0;i<r;i++)l+=Math.pow(10,i);else l=1;var c=setInterval(function(){n<=a?(s=t.num_init(n),n+=l,e.html(s)):(s=t.num_init(a),e.html(s),clearInterval(c))},o)},area_map:function(e){var n,a=e.attr("id"),i=$("body"),t=$(".meter-arrow"),o=$("#meter-num"),s=GVR.ECHARTS.AREA_MAP;switch(a){case"palaver":n="洽谈中";break;case"purpose":n="确定意向";break;case"arrange":n="部署中";break;case"train":n="培训中";break;case"use":n="使用中";break;default:n="部署中"}i.find(".hospital-alert").remove(),$(".img-rotate").each(function(e,n){t.removeClass("meter-arrow-"+(e+1)),o.removeClass("meter-num-"+(e+1))}),t.addClass("meter-arrow-"+(e.index()+1)),o.addClass("meter-num-"+(e.index()+1)),$("."+a+"-img").addClass("active").siblings().removeClass("active"),GVR.JSON.hospital_num&&$("#meter-num").text(GVR.JSON.hospital_num[a+"_num"]),s&&s.dispatchAction({type:"legendSelect",name:n})},ajax_get:function(e,n,a,i,t){var o=this,s=Array.prototype.slice.call(arguments),r=s.slice(-1)[0];if(i=null,call_back=null,_.isFunction(r)){var t=s.pop(),l=s.slice(-1)[0];_.isFunction(l)&&(i=s.pop()),e=s[0],n=s[1],a=s[2]}if(!e.hasClass("disabled")){e.addClass("disabled");new Date;n=n||{};var a=a||e.attr("url")||".";return $.ajax({type:"GET",url:a,data:n,dataType:"JSONP",jsonp:"callback",jsonpCallback:"success_jsonpCallback",success:function(n){n.msg&&console.log(n.msg),e.removeClass("disabled"),_.isFunction(t)&&t(n),1===n.reload?o._reload():2===n.reload?o.reload():3===n.reload?o._reload(0):n.redirect&&o.redirect(n.redirect)},error:function(n,a,t){console.log(n),console.log(a),console.log(t),"error"===a?404===n.status?console.info("无效的数据"):500===n.status?console.info("服务器异常，请联系管理员"):403===n.status?(console.info("登录已过期或没有访问权限"),o._reload()):console.info("网络异常，请稍后再试"):a&&console.log(a),_.isFunction(i)&&i(),e.removeClass("disabled")}})}return!1}};$(function(){COMMON_FUNC.ready_init()}).on("click",".img-rotate",function(){COMMON_FUNC.area_map($(this))});